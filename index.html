const groupURL = "https://techcommunity.microsoft.com/group/copilot-studio-community-hub";

function openGroup() {
  const newTab = window.open(groupURL, '_blank');
  if (!newTab) {
    // Pop-up blocked — show fallback button
    document.querySelector('.spinner').style.display = 'none';
    document.querySelector('p').textContent = 'Tap below to open the community:';
    document.getElementById('openCommunity').style.display = 'inline-block';
  } else {
    // Opened successfully — hide spinner
    document.querySelector('.spinner').style.display = 'none';
    document.querySelector('p').textContent = 'Opening your community...';
  }
}

window.addEventListener('load', () => {
  // Delay slightly to ensure the page is painted before trying to open
  setTimeout(openGroup, 500);
});

document.getElementById('openCommunity').addEventListener('click', openGroup);
